---
where: os.name == "linux"

depends:
  - startup.systemd

actions:
  - action: command.run
    command: rm
    args:
      - "{{ user.home_dir }}/.local/share/bin/enact"

  - action: binary.github
    name: enact
    directory: "{{ user.home_dir }}/.local/share/bin/"
    repository: chmln/enact
    version: v0.1

  - action: directory.copy
    from: enact/systemd
    to: "{{ user.home_dir }}/.config"

  - action: command.run
    command: systemctl
    args:
      - --user
      - add-wants
      - autostart.target
      - enact.service
