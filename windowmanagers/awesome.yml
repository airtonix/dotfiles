---
where: os.name == "linux"

depends:
  - startup.systemd
  - commands.bin
  - windowmanagers.rofi
  - windowmanagers.picom
  - windowmanagers.enact
  - shells.xresources.xresource

actions:
  - action: command.run
    command: rm
    args:
      - "-rf"
      - "{{user.home_dir}}/.config/awesome"

  - action: directory.copy
    from: awesome
    to: "{{user.home_dir}}/.config/"

  - action: package.install
    list:
      - awsome
      - arandr
      - autorandr
      - nitrogen
      - lxappearance
      - scrot
      - viewnior
      - xsel
      - xsettingsd
      - lua
      - luarocks
      - lua-devel
      - lua-lgi

  - action: command.run
    command: git
    args:
      - clone
      - --recurse-submodules
      - --remote-submodules
      - --depth 1
      - -j 2
      - https://github.com/lcpz/awesome-copycats.git
      - "{{user.home_dir}}/.config/awesome/awesome-copycats"

  - action: command.run
    command: mv
    args:
      - -bv
      - "{{user.home_dir}}/.config/awesome/awesome-copycats/{*,.[^.]*}"
      - "{{user.home_dir}}/.config/awesome"

  - action: command.run
    command: rm
    args:
      - -rf
      - "{{user.home_dir}}/.config/awesome/awesome-copycats"
