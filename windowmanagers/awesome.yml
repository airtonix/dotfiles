---
where: os.name == "linux"

depends:
  - dotfiles.submodules
  - windowmanagers.rofi
  - windowmanagers.picom
  - windowmanagers.autorandr
  - commands.bin
  - startup.systemd
  - shells.xresources
  - shells.zsh

actions:

  - action: command.run
    command: sh
    args:
      - -c
      - |
        rm -rf "{{user.home_dir}}/.config/awesome"


  - action: directory.copy
    from: awesome
    to: "{{user.home_dir}}/.config/"

  - action: package.install
    when: os.family == "fedora"
    list:
      - lua
      - lua-devel
      - gobject-introspection-devel

  - action: package.install
    list:
      - awesome
      - arandr
      - autorandr
      - nitrogen
      - lxappearance
      - scrot
      - viewnior
      - xsel
      - xsettingsd
      - luarocks

  - action: command.run
    sudo: true
    command: sh
    args:
      -  -s
      - |
        packages=(path luafilesystem power_widget lgi lcpz/awesome-freedesktop awesome-autostart lyaml); for package in $packages; do echo "installing ${package}"; luarocks install $package; done
